import{a as f,c as P,j as e,B as b,f as C,r as j,u as k,g as A,h as E,R as D,b as S,S as $}from"./ButtonInput-BzPmwIqa.js";function M({onMenuClick:s}){f();const{theme:c}=P(),i=()=>{switch(c){case"accessibility":return"theme-accessibility";case"dark":return"theme-dark";case"simple":return"theme-simple";case"compact":return"theme-compact";case"flat":return"theme-flat";default:return"theme-normal"}};return e.jsx("header",{className:`main-header ${i()}`,children:e.jsxs("div",{className:"header-content",children:[e.jsx("h1",{className:"header-title",children:"Auths"}),e.jsx("div",{className:"header-actions",children:e.jsx(b,{onClick:s,className:"menu-button",title:"Menu",children:"â˜°"})})]})})}function L({entry:s,filtered:c=!1,notSearched:i=!1,tabindex:o=-1}){const{dispatch:a}=C(),{style:d}=f(),[h,r]=j.useState(0);j.useEffect(()=>{if(s.type!==2&&s.type!==6){const t=()=>{const l=Math.floor(Date.now()/1e3),g=(s.period-l%s.period)/s.period*100;r(g)};t();const m=setInterval(t,100);return()=>clearInterval(m)}},[s.period,s.type]);const x=()=>{s.code&&s.code!=="-1"&&s.code!=="-2"&&(navigator.clipboard.writeText(s.code),a({type:"showNotification"}))},u=()=>{a({type:"pinEntry",payload:s})},y=()=>{confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªè´¦æˆ·å—ï¼Ÿ")&&a({type:"deleteCode",payload:s.hash})},v=s.type===2||s.type===6,N=s.secret===null;return e.jsxs("div",{className:`entry ${c?"filtered":""} ${i?"not-searched":""}`,tabIndex:o,"data-x-role":"entry",onClick:x,children:[e.jsxs("div",{className:"entry-info",children:[e.jsxs("div",{className:"entry-issuer",children:[s.pinned&&e.jsx("span",{className:"pin-indicator",children:"ðŸ“Œ"}),s.issuer||"No Issuer"]}),e.jsx("div",{className:"entry-account",children:s.account||"No Account"}),!v&&e.jsx("div",{className:"entry-progress",children:e.jsx("div",{className:"progress-bar",style:{width:`${h}%`}})})]}),e.jsxs("div",{className:"entry-right",children:[e.jsx("div",{className:"entry-code",children:N?"â€¢â€¢â€¢â€¢â€¢â€¢â€¢":s.code}),v&&e.jsx("button",{className:"btn-next",onClick:t=>{t.stopPropagation()},title:"Generate next code",children:"â†»"})]}),d.isEditing&&e.jsxs("div",{className:"entry-actions",children:[e.jsx("button",{onClick:t=>{t.stopPropagation(),u()},title:s.pinned?"å–æ¶ˆç½®é¡¶":"ç½®é¡¶",children:(s.pinned,"ðŸ“Œ")}),e.jsx("button",{onClick:t=>{t.stopPropagation(),y()},title:"åˆ é™¤",className:"danger",children:"ðŸ—‘ï¸"})]})]})}function I(){const{entries:s,filter:c,showSearch:i,dispatch:o}=C();f();const[a,d]=j.useState(""),h=j.useRef(null),r=s.filter(t=>a===""?!0:t.issuer.toLowerCase().includes(a.toLowerCase())||t.account.toLowerCase().includes(a.toLowerCase())),x=t=>!1,u=t=>(a===""||t.issuer.toLowerCase().includes(a.toLowerCase())||t.account.toLowerCase().includes(a.toLowerCase()))&&(t.pinned||!c||x()),y=()=>{o({type:"stopFilter"}),s.length>=10&&o({type:"showSearch"})},v=t=>{const m=h.current;if(!m)return;const l=Array.from(m.querySelectorAll(".entry:not(.filtered):not(.not-searched)")),p=l.indexOf(document.activeElement);switch(t.key){case"ArrowDown":case"ArrowRight":t.preventDefault();const g=p<l.length-1?p+1:0;l[g]?.focus();break;case"ArrowUp":case"ArrowLeft":t.preventDefault();const n=p>0?p-1:l.length-1;l[n]?.focus();break}},N=t=>{const m=s.find(u);return t===m?0:-1};return e.jsxs("div",{id:"codes",className:`${c&&i?"filter search":""}`,ref:h,onKeyDown:v,children:[c&&e.jsx("div",{className:"under-header",id:"filter",onClick:y,children:"æ˜¾ç¤ºæ‰€æœ‰æ¡ç›®"}),i&&e.jsxs("div",{className:"under-header",id:"search",children:[e.jsx("input",{id:"searchInput",value:a,onChange:t=>d(t.target.value),placeholder:"æœç´¢...",type:"text",tabIndex:-1}),a===""&&e.jsxs("div",{id:"searchHint",children:[e.jsx("div",{}),e.jsx("div",{id:"searchHintBorder",children:"/"}),e.jsx("div",{})]})]}),e.jsx("div",{children:r.length===0&&s.length===0?e.jsxs("div",{className:"no-entry",children:[e.jsx("div",{className:"icon",children:"ðŸ”‘"}),e.jsxs("p",{children:["æš‚æ— æ¡ç›®ã€‚"," ",e.jsx("a",{href:"https://otp.ee/quickstart",target:"_blank",rel:"noopener noreferrer",children:"äº†è§£æ›´å¤š"})]})]}):r.map(t=>e.jsx(L,{entry:t,filtered:!t.pinned&&!0,notSearched:a!==""&&!t.issuer.toLowerCase().includes(a.toLowerCase())&&!t.account.toLowerCase().includes(a.toLowerCase()),tabindex:N(t)},t.hash))})]})}function T(){const{version:s,zoom:c,useAutofill:i,smartFilter:o,enableContextMenu:a,theme:d,autolock:h,dispatch:r}=P(),{dispatch:x}=k(),{dispatch:u}=f(),y=n=>{r({type:"setZoom",payload:n}),n!==100?(document.body.style.marginBottom=480*(n/100-1)+"px",document.body.style.marginRight=320*(n/100-1)+"px",document.body.style.transform="scale("+n/100+")"):(document.body.style.marginBottom="",document.body.style.marginRight="",document.body.style.transform="")},v=n=>{r({type:"setAutofill",payload:n})},N=n=>{r({type:"setSmartFilter",payload:n})},t=n=>{r({type:"setEnableContextMenu",payload:n})},m=n=>{r({type:"setTheme",payload:n})},l=n=>{r({type:"setAutolock",payload:n})},p=()=>{u({type:"hideMenu"})},g=n=>{x({type:"changeView",payload:n}),u({type:"hideMenu"})};return e.jsxs("div",{className:"menu-page",children:[e.jsxs("div",{className:"menu-header",children:[e.jsx("h2",{children:"è®¾ç½®"}),e.jsx(b,{onClick:p,className:"close-button",title:"å…³é—­",children:"Ã—"})]}),e.jsxs("div",{className:"menu-content",children:[e.jsxs("div",{className:"menu-section",children:[e.jsx("h3",{children:"å¸¸è§„è®¾ç½®"}),e.jsxs("div",{className:"menu-item",children:[e.jsxs("label",{children:["ç¼©æ”¾: ",c,"%"]}),e.jsx("input",{type:"range",min:"50",max:"150",step:"10",value:c,onChange:n=>y(Number(n.target.value))})]}),e.jsx("div",{className:"menu-item",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:i,onChange:n=>v(n.target.checked)}),"å¯ç”¨è‡ªåŠ¨å¡«å……"]})}),e.jsx("div",{className:"menu-item",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:o,onChange:n=>N(n.target.checked)}),"æ™ºèƒ½è¿‡æ»¤"]})}),e.jsx("div",{className:"menu-item",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:a,onChange:n=>t(n.target.checked)}),"å¯ç”¨ä¸Šä¸‹æ–‡èœå•"]})})]}),e.jsxs("div",{className:"menu-section",children:[e.jsx("h3",{children:"å¤–è§‚"}),e.jsxs("div",{className:"menu-item",children:[e.jsx("label",{children:"ä¸»é¢˜:"}),e.jsxs("select",{value:d,onChange:n=>m(n.target.value),children:[e.jsx("option",{value:"normal",children:"æ™®é€š"}),e.jsx("option",{value:"dark",children:"æ·±è‰²"}),e.jsx("option",{value:"simple",children:"ç®€å•"}),e.jsx("option",{value:"compact",children:"ç´§å‡‘"}),e.jsx("option",{value:"flat",children:"æ‰å¹³"}),e.jsx("option",{value:"accessibility",children:"æ— éšœç¢"})]})]})]}),e.jsxs("div",{className:"menu-section",children:[e.jsx("h3",{children:"å®‰å…¨"}),e.jsxs("div",{className:"menu-item",children:[e.jsx("label",{children:"è‡ªåŠ¨é”å®š (ç§’):"}),e.jsx("input",{type:"number",min:"0",max:"300",value:h,onChange:n=>l(Number(n.target.value))})]})]}),e.jsxs("div",{className:"menu-section",children:[e.jsx("h3",{children:"å…¶ä»–"}),e.jsx("div",{className:"menu-item",children:e.jsx(b,{onClick:()=>g("BackupPage"),className:"menu-button",children:"å¤‡ä»½è®¾ç½®"})}),e.jsx("div",{className:"menu-item",children:e.jsx(b,{onClick:()=>g("AboutPage"),className:"menu-button",children:"å…³äºŽ"})})]}),e.jsx("div",{className:"menu-footer",children:e.jsxs("p",{children:["ç‰ˆæœ¬: ",s]})})]})]})}const F=()=>e.jsx("div",{children:"Enter Password Page"}),B=()=>e.jsx("div",{children:"Add Account Page"}),R=()=>e.jsx("div",{children:"Loading Page"}),q=()=>e.jsx("div",{children:"Preferences Page"}),H=()=>e.jsx("div",{children:"Menu Page"}),O=()=>e.jsx("div",{children:"Backup Page"}),K=()=>e.jsx("div",{children:"Dropbox Page"}),V=()=>e.jsx("div",{children:"Drive Page"}),Q=()=>e.jsx("div",{children:"OneDrive Page"}),z=()=>e.jsx("div",{children:"Set Password Page"}),G=()=>e.jsx("div",{children:"Advisor Page"}),U=()=>e.jsx("div",{children:"Advisor Insight"});function _(){const{info:s}=k(),{style:c}=f(),i=()=>{switch(s){case"EnterPasswordPage":return e.jsx(F,{});case"AddAccountPage":return e.jsx(B,{});case"LoadingPage":return e.jsx(R,{});case"PreferencesPage":return e.jsx(q,{});case"MenuPage":return e.jsx(H,{});case"BackupPage":return e.jsx(O,{});case"DropboxPage":return e.jsx(K,{});case"DrivePage":return e.jsx(V,{});case"OneDrivePage":return e.jsx(Q,{});case"SetPasswordPage":return e.jsx(z,{});case"AdvisorPage":return e.jsx(G,{});case"AdvisorInsight":return e.jsx(U,{});default:return null}};return e.jsx("div",{className:`page-handler ${c.fadein?"fadein":""} ${c.fadeout?"fadeout":""} ${c.show?"show":""}`,children:i()})}function J(){const{message:s,messageIdle:c,dispatch:i}=A(),{style:o}=f();return j.useEffect(()=>{if(!c&&o.notificationFadeout){const a=setTimeout(()=>{i({type:"closeAlert"})},200);return()=>clearTimeout(a)}},[c,o.notificationFadeout,i]),j.useEffect(()=>{if(o.notificationFadein){const a=setTimeout(()=>{i({type:"showNotification",payload:""}),i({type:"showNotification"})},1e3);return()=>clearTimeout(a)}},[o.notificationFadein,i]),e.jsxs(e.Fragment,{children:[s.length>0&&e.jsx("div",{className:`alert-container ${c?"":"active"}`,children:e.jsxs("div",{className:"alert-content",children:[e.jsx("p",{children:s[0]}),e.jsx("button",{onClick:()=>i({type:"closeAlert"}),className:"alert-close",children:"Ã—"})]})}),s.length>1&&e.jsx("div",{className:"confirm-container",children:e.jsxs("div",{className:"confirm-content",children:[e.jsx("p",{children:s[1]}),e.jsxs("div",{className:"confirm-buttons",children:[e.jsx("button",{onClick:()=>{const a=new CustomEvent("confirm",{detail:!0});window.dispatchEvent(a),i({type:"setConfirm",payload:""})},className:"confirm-yes",children:"æ˜¯"}),e.jsx("button",{onClick:()=>{const a=new CustomEvent("confirm",{detail:!1});window.dispatchEvent(a),i({type:"setConfirm",payload:""})},className:"confirm-no",children:"å¦"})]})]})})]})}function W(){const{style:s}=f(),{theme:c}=P(),{qr:i}=E(),{notification:o}=A(),[a,d]=j.useState(!0),h=()=>{switch(c){case"accessibility":return"theme-accessibility";case"dark":return"theme-dark";case"simple":return"theme-simple";case"compact":return"theme-compact";case"flat":return"theme-flat";default:return"theme-normal"}},r=()=>{d(!0)},x=()=>{d(!1)},u=()=>{};return e.jsxs("div",{className:`${h()} ${a?"hideoutline":""}`,onMouseDown:r,onKeyDown:x,children:[e.jsx(M,{}),e.jsx("div",{className:`${s.timeout&&!s.isEditing?"timeout":""} ${s.isEditing?"edit":""}`,children:e.jsx(I,{})}),e.jsx("div",{className:`${s.slidein?"slidein":""} ${s.slideout?"slideout":""}`,children:e.jsx(T,{})}),e.jsx("div",{className:`${s.fadein?"fadein":""} ${s.fadeout?"fadeout":""} ${s.show?"show":""}`,children:e.jsx(_,{})}),e.jsx(J,{}),e.jsx("div",{className:`notification ${s.notificationFadein?"fadein":""} ${s.notificationFadeout?"fadeout":""}`,children:o}),e.jsx("div",{className:`qr ${s.qrfadein?"qrfadein":""} ${s.qrfadeout?"qrfadeout":""}`,style:{backgroundImage:i},onClick:u}),e.jsx("input",{type:"text",id:"codeClipboard",tabIndex:-1})]})}const w=document.getElementById("root");w&&D.createRoot(w).render(e.jsx(S.StrictMode,{children:e.jsx($,{children:e.jsx(W,{})})}));
